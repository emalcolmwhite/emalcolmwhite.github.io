count(dest, airport_name) %>%
arrange(-n)
table <- flights_joined %>%
left_join(airports, by=c("dest" = "faa"))  %>%
rename(airport_name = name.y) %>%
count(dest, airport_name) %>%
arrange(-n)
View(table)
data("weather")
force(weather)
View(weather)
flights_joined_more %>%
flights_joined_more %>%
left_join(weather, by=c("origin", "time_hour"))
flights_joined_more %>%
left_join(weather, by=c("origin"))
flights_joined_more %>%
left_join(weather, by=c("origin", "time_hour"))
flights_joined_more %>%
left_join(weather, by=c("origin", "year", "month", "day", "hour"))
flights_joined_more %>%
left_join(weather, by=c("origin", "year", "month", "day", "hour"))
flights_joined_more %>%
left_join(weather, by=c("origin", "time_hour"))
#| eval: FALSE
flights %>%
ggplot(aes(x = carrier, fill = origin)) +
geom_bar() +
coord_flip()
#VS
flights %>%
inner_join(airports, by = c("origin" = "faa")) %>%
rename(origin_airport = name) %>%
inner_join(airlines, by = c("carrier")) %>%
rename(carrier_name= name) %>%
ggplot(mapping = aes(x = carrier_name, fill = origin_airport)) +
geom_bar() +
coord_flip()
#| eval: FALSE
flights_weather_joined %>%
filter(dep_delay >0) %>%
ggplot(aes(x=temp, y=dep_delay)) +
geom_point()
flights_weather_joined <- flights_joined_more %>%
left_join(weather, by=c("origin", "time_hour"))
#| eval: FALSE
flights_weather_joined %>%
filter(dep_delay >0) %>%
ggplot(aes(x=temp, y=dep_delay)) +
geom_point()
setwd("~/OneDrive - Middlebury College/Q-Center - CTLR/Tutors/Budget and Wages")
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
portal_wgt_summary <- portal_rodent %>%
filter(!is.na(wgt)) %>%
group_by(plot, species) %>%
summarize(mean_wgt = mean(wgt))
knitr::opts_chunk$set(echo = TRUE, message=FALSE, warning=FALSE)
#LOAD PACKAGES
library(tidyverse)
#LOAD DATA
portal_rodent <- read.csv("https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv")
portal_wgt_summary <- portal_rodent %>%
filter(!is.na(wgt)) %>%
group_by(plot, species) %>%
summarize(mean_wgt = mean(wgt))
portal_wgt_summary
portal_wgt_summary %>%
pivot_wider(names_from = species, values_from = mean_wgt)
wide <- portal_wgt_summary %>%
pivot_wider(names_from = species, values_from = mean_wgt)
wide
wide %>%
pivot_longer(names_to = "species", values_to = "mean_wgt", cols=-2:4)
wide
wide %>%
pivot_longer(names_to = "species", values_to = "mean_wgt", cols=2:28)
portal_rodent %>%
count(year, plot)
portal_rodent %>%
group_by(year, plot) %>%
summarize(unique_species = n_distinct(species))
portal_rodent %>%
group_by(year, plot) %>%
summarize(unique_species = n_distinct(species)) %>%
pivot_wider(names_from = year, values_from = unique_species)
courses <- read.csv("courses.csv")
str_detect("hit the rollie store with the rollie on", "rollie")
#LOAD PACKAGES
library(tidyverse)
library(stringr)
str_detect("hit the rollie store with the rollie on", "rollie")
str_detect("hit the rollie store with the rollie on", "rollie")
str_detect("hit the rollie store with the rollie on", "emily malcolm-white")
courses %>%
filter(location == "Warner")
courses %>%
filter(str_detect(location, "Warner"))
warner_courses <- courses %>%
filter(str_detect(location, "Warner"))
courses %>%
filter(str_detect(meet, "Friday"))
courses %>%
filter(!str_detect(meet, "Friday"))
no_friday <- courses %>%
filter(!str_detect(meet, "Friday"))
courses %>%
filter(str_detect(description, "artificial intelligence"))
courses %>%
filter(str_detect(description, regrex("artificial intelligence", ignore_case=T)))
courses %>%
filter(str_detect(description, regex("artificial intelligence", ignore_case=T)))
?regex
str_extract("hit the rollie store with the rollie on", "rollie")
str_extract("hit the rollie store with the rollie on", "rollie")
str_remove("hit the rollie store with the rollie on", "rollie")
str_extract("hit the rollie store with the rollie on", "rollie")
str_remove("hit the rollie store with the rollie on", "rollie")
str_remove_all("hit the rollie store with the rollie on", "rollie")
courses %>%
mutate(isCW = str_extract(distros, "CW")) %>%
mutate(distros = str_remove(distrobs, "CW"))
courses %>%
mutate(isCW = str_extract(distros, "CW")) %>%
mutate(distro = str_remove(distrobs, "CW"))
courses %>%
mutate(isCW = str_extract(distros, "CW")) %>%
mutate(distros = str_remove(distros, "CW"))
str_sub("Welcome to data science!", start=12, end=20)
str_sub("Welcome to data science!", start=12, end=23)
View(courses)
courses %>%
filter(department == "Mathematics & Statistics")
courses %>%
filter(department == "Mathematics & Statistics")
courses %>%
filter(department == "Mathematics & Statistics ")
courses %>%
filter(department == "Mathematics & Statistics ")
courses %>%
filter(department == "Mathematics & Statistics ")
mathcourses <- courses %>%
filter(department == "Mathematics & Statistics ") %>%
mutate(level = str_sub(courseNum, start=6, end=6)) %>%
filter(level == "2")
str_count("hit the rollie store with the rollie on", "rollie")
courses <- courses %>%
mutate(dayCount = str_count(meet, "day"))
max(courses$dayCount)
courses %>%
ggplot(aes(x=dayCount)) +
geom_bar()
courses %>%
ggplot(aes(x=as.character(dayCount))) +
geom_bar()
courses %>%
ggplot(aes(x=as.factor(dayCount))) +
geom_bar()
courses %>%
ggplot(aes(x=as.character(dayCount))) +
geom_bar()
courses %>%
ggplot(aes(x=as.character(dayCount))) +
geom_bar() +
xlab("Number of days per week the class meets")
courses %>%
ggplot(aes(x=as.character(dayCount))) +
geom_bar() +
xlab("Number of days per week the class meets") +
ylab("Number of classes")
courses %>%
ggplot(aes(x=as.character(dayCount))) +
geom_bar(fill="blue") +
xlab("Number of days per week the class meets") +
ylab("Number of classes") +
theme_classic()
ymd("06 02 04")
#| warning: FALSE
#| message: FALSE
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
ymd("06 02 04")
ymd("06/02/04")
ymd("20060204")  # works as well
ymd("2006 2 4")
ymd(060204)  # works with numbers
ymd_hms("2020-04-01 10:30:13")
ymd_hm("2020/04/01 10.30")
today <- Sys.Date()
today <- Sys.Date()
age <- today - birthday
birthday <- ymd("1998-09-27")
year(birthday)      # 1998
month(birthday)     # 9
month(birthday, label = TRUE)  # "Sep"
day(birthday)       # 27
wday(birthday, label = TRUE)   # "Sun"
today <- Sys.Date()
age <- today - birthday
today <- Sys.Date()
age <- today - birthday
age
age <- today - birthday
time_length(age, "years" )
age <- today - birthday
age
time_length(age, "years" )
today + days(28)
portal_rodent <- portal_rodent %>%
mutate(datetime = make_datetime(year, month, day))
#LOAD DATA
portal_rodent <- read.csv("https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv")
portal_rodent <- portal_rodent %>%
mutate(datetime = make_datetime(year, month, day))
portal_rodent <- portal_rodent %>%
mutate(datetime = make_date(year, month, day))
portal_rodent |>
count(date) |>
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date")
portal_rodent <- portal_rodent %>%
mutate(datetime = make_date(year, month, day))
portal_rodent <- portal_rodent %>%
mutate(date = make_date(year, month, day))
portal_rodent |>
count(date) |>
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date")
#| warning: FALSE
#| message: FALSE
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
ymd("06 02 04")
ymd("06/02/04")
ymd("20060204")  # works as well
ymd("2006 2 4")
ymd(060204)  # works with numbers
ymd_hms("2020-04-01 10:30:13")
ymd_hm("2020/04/01 10.30")
birthday <- ymd("1998-09-27")
year(birthday)      # 1998
month(birthday)     # 9
month(birthday, label = TRUE)  # "Sep"
day(birthday)       # 27
wday(birthday, label = TRUE)   # "Sun"
today <- Sys.Date()
age <- today - birthday
age
time_length(age, "years" )
today + days(28)
#LOAD DATA
portal_rodent <- read.csv("https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv")
portal_rodent |>
count(date) |>
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date")
portal_rodent <- portal_rodent %>%
mutate(date = make_date(year, month, day))
portal_rodent |>
count(date) |>
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date")
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date")
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line() +
labs(title = "Rodent Trapping Over Time", y = "Number of Observations", x = "Date") +
theme_minimal()
portal_rodent |>
mutate(month = month(date, label = TRUE)) |>
count(month) |>
ggplot(aes(x = month, y = n)) +
geom_col() +
labs(title = "Trapping Frequency by Month", y = "Number of Observations")
portal_rodent %>%
mutate(month = month(date, label = TRUE)) %>%
count(month) %>%
ggplot(aes(x = month, y = n)) +
geom_col() +
labs(title = "Trapping Frequency by Month", y = "Number of Observations")
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line()
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line()
portal_rodent %>%
mutate(month_floor = floor_date(date, "month")) %>%
count(month_floor) %>%
ggplot(aes(x = month_floor, y = n)) +
geom_line()
portal_rodent <- portal_rodent %>%
mutate(
date = make_date(year, month, day),
season = case_when(
month %in% c(12, 1, 2) ~ "Winter",
month %in% c(3, 4, 5) ~ "Spring",
month %in% c(6, 7, 8) ~ "Summer",
month %in% c(9, 10, 11) ~ "Fall",
TRUE ~ NA_character_
)
)
portal_rodent %>%
count(season) %>%
ggplot(aes(x = season, y = n)) +
geom_line()
portal_rodent <- portal_rodent %>%
mutate(
date = make_date(year, month, day),
season = case_when(
month %in% c(12, 1, 2) ~ "Winter",
month %in% c(3, 4, 5) ~ "Spring",
month %in% c(6, 7, 8) ~ "Summer",
month %in% c(9, 10, 11) ~ "Fall",
TRUE ~ NA_character_
)
)
portal_rodent %>%
count(season) %>%
ggplot(aes(x = season, y = n)) +
geom_line()
#| warning: FALSE
#| message: FALSE
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
ymd("06 02 04")
ymd("06/02/04")
ymd("20060204")  # works as well
ymd("2006 2 4")
ymd(060204)  # works with numbers
ymd_hms("2020-04-01 10:30:13")
ymd_hm("2020/04/01 10.30")
birthday <- ymd("1998-09-27")
year(birthday)      # 1998
month(birthday)     # 9
month(birthday, label = TRUE)  # "Sep"
day(birthday)       # 27
wday(birthday, label = TRUE)   # "Sun"
today <- Sys.Date()
age <- today - birthday
age
time_length(age, "years" )
today + days(28)
#LOAD DATA
portal_rodent <- read.csv("https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv")
portal_rodent <- portal_rodent %>%
mutate(date = make_date(year, month, day))
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line()
portal_rodent %>%
mutate(month_floor = floor_date(date, "month")) %>%
count(month_floor) %>%
ggplot(aes(x = month_floor, y = n)) +
geom_line()
portal_rodent <- portal_rodent %>%
mutate(
date = make_date(year, month, day),
season = case_when(
month %in% c(12, 1, 2) ~ "Winter",
month %in% c(3, 4, 5) ~ "Spring",
month %in% c(6, 7, 8) ~ "Summer",
month %in% c(9, 10, 11) ~ "Fall",
TRUE ~ NA_character_
)
)
portal_rodent %>%
count(season) %>%
ggplot(aes(x = season, y = n)) +
geom_line()
portal_rodent %>%
count(season)
portal_rodent %>%
count(season) %>%
ggplot(aes(x = season, y = n)) +
geom_line()
portal_rodent %>%
count(season) %>%
ggplot(aes(x = season, y = n)) +
geom_col()
portal_rodent %>%
mutate(year_floor = floor_date(date, "year")) %>%
count(year_floor) %>%
ggplot(aes(x = month_floor, y = n)) +
geom_line()
#| warning: FALSE
#| message: FALSE
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
ymd("06 02 04")
ymd("06/02/04")
ymd("20060204")  # works as well
ymd("2006 2 4")
ymd(060204)  # works with numbers
ymd_hms("2020-04-01 10:30:13")
ymd_hm("2020/04/01 10.30")
birthday <- ymd("1998-09-27")
year(birthday)      # 1998
month(birthday)     # 9
month(birthday, label = TRUE)  # "Sep"
day(birthday)       # 27
wday(birthday, label = TRUE)   # "Sun"
today <- Sys.Date()
age <- today - birthday
age
time_length(age, "years" )
today + days(28)
#LOAD DATA
portal_rodent <- read.csv("https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv")
portal_rodent <- portal_rodent %>%
mutate(date = make_date(year, month, day))
portal_rodent %>%
count(date) %>%
ggplot(aes(x = date, y = n)) +
geom_line()
portal_rodent %>%
mutate(month_floor = floor_date(date, "month")) %>%
count(month_floor) %>%
ggplot(aes(x = month_floor, y = n)) +
geom_line()
portal_rodent %>%
mutate(year_floor = floor_date(date, "year")) %>%
count(year_floor) %>%
ggplot(aes(x = year_floor, y = n)) +
geom_line()
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
#LOAD DATA
library(nycflights13)
data("flights")
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
#LOAD DATA
library(nycflights23)
data("flights")
flights |>
mutate(week = floor_date(sched_departure_datetime, "week")) |>
group_by(weekday, week) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = week, y = fct_rev(weekday), fill = avg_delay)) +
geom_tile() +
scale_fill_viridis_c() +
labs(title = "Calendar Heatmap of Avg Departure Delays",
x = "Week", y = "Weekday") +
theme_minimal()
#LOAD PACKAGES
library(tidyverse)
library(lubridate)
#LOAD DATA
library(nycflights23)
data("flights")
flights |>
mutate(week = floor_date(sched_departure_datetime, "week")) |>
group_by(weekday, week) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = week, y = fct_rev(weekday), fill = avg_delay)) +
geom_tile() +
scale_fill_viridis_c() +
labs(title = "Calendar Heatmap of Avg Departure Delays",
x = "Week", y = "Weekday") +
theme_minimal()
flights %>%
mutate(sched_departure_datetime = make_datetime(year, month, day, hour = sched_dep_time %/% 100, min = sched_dep_time %% 100))
mutate(week = floor_date(sched_departure_datetime, "week")) |>
group_by(weekday, week) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = week, y = fct_rev(weekday), fill = avg_delay)) +
geom_tile() +
scale_fill_viridis_c() +
labs(title = "Calendar Heatmap of Avg Departure Delays",
x = "Week", y = "Weekday") +
theme_minimal()
flights %>%
mutate(sched_departure_datetime = make_datetime(year, month, day, hour = sched_dep_time %/% 100, min = sched_dep_time %% 100)) %>%
mutate(week = floor_date(sched_departure_datetime, "week")) |>
group_by(weekday, week) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = week, y = fct_rev(weekday), fill = avg_delay)) +
geom_tile() +
scale_fill_viridis_c() +
labs(title = "Calendar Heatmap of Avg Departure Delays",
x = "Week", y = "Weekday") +
theme_minimal()
flights %>%
mutate(sched_departure_datetime = make_datetime(year, month, day, hour = sched_dep_time %/% 100, min = sched_dep_time %% 100)) %>%
mutate(week = floor_date(sched_departure_datetime, "week")) |>
mutate(weekday = wday(sched_departure_datetime, label = TRUE, abbr = FALSE)) |>
group_by(weekday, week) |>
summarise(avg_delay = mean(dep_delay, na.rm = TRUE)) |>
ggplot(aes(x = week, y = fct_rev(weekday), fill = avg_delay)) +
geom_tile() +
scale_fill_viridis_c() +
labs(title = "Calendar Heatmap of Avg Departure Delays",
x = "Week", y = "Weekday") +
theme_minimal()
