{
  "hash": "4b4ce8d7f9ba072991893d2497134ee1",
  "result": {
    "markdown": "---\ntitle:  'barplots and scatterplots'\nauthor: 'Emily Malcolm-White'\nformat:\n  html: \n    toc: TRUE\n    code-overflow: wrap\n    embed-resources: true\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\n    code-annotations: hover\n  pdf: default\nexecute: \n  message: FALSE\n  warning: FALSE\n---\n\n\n\n`ggplot2` is a package built within the `tidyverse` package for creating awesome graphs! \n\n![Artwork by @allisonhorst](https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/9a306c0a-dac8-413d-ba2e-cc7fd4c4d5c8_rw_1200.png?h=c627fad145421b9034b413b0b68d03bb){width=50%}\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#Import the can_lang dataset \ncan_lang <- read.csv(\"https://raw.githubusercontent.com/ttimbers/canlang/master/inst/extdata/can_lang.csv\")\n```\n:::\n\n\n\n# Recall our Top 10 example: \n\nThis code gave a list of 10 Aboriginal Languages which have the most number of people who speak them as their mother tongue: \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nten_lang <- can_lang %>%  #<1>\n  filter(category == \"Aboriginal languages\") %>% #<2>\n  arrange(desc(mother_tongue)) %>% #<3>\n  select(language, mother_tongue) %>%  #<4>\n  slice(1:10) #<5>\n```\n:::\n\n\n\n1. Start with the `can_lang` dataset\n2. Filter for aboriginal languages only\n3. arrange the rows from highest number of people who speak the language as their mother tongue, to the lowest number of people who speak the language as their mother tongue\n4. only include the language and mother_tongue columns\n5. only include the top 10 rows\n\n\n# Barplots\n\nSuppose we wanted to display this information in a barplot instead of in a table. Let's take a look at the `ggplot` syntax: \n\n![Credit: https://github.com/UBC-DSCI/introduction-to-datascience/ ](https://github.com/UBC-DSCI/introduction-to-datascience/blob/main/img/intro/ggplot_function.png?raw=true)\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nten_lang %>% #<1> \n  ggplot(aes(x = language, y = mother_tongue)) + #<2> \n  geom_bar(stat = \"identity\") #<3>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-4-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. Begin with the `ten_lang` dataset\n2. Create a plot -- the x-axis contains the languages and the y-axis contains the number of people who speak the language as their mother tongue. This sets up the coordinate system, but no visualization appears yet.\n3. add a layer with a barplot. The height of the bars should simply be the number of people who speak the language as their mother tongue. Without `stat = \"identity\"`, `geom_bar()` defaults to `stat = \"count\"`, which means it counts rows instead of using a y-variable.\n\nIs there any improvements we could make to this graph? \n\n# To better view text\n\nDisplay the bars horizontally instead of vertically! \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ten_lang, aes(x = language, y = mother_tongue)) +\n  geom_bar(stat = \"identity\") +  \n  coord_flip() #<1>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-5-1.pdf){fig-pos='H'}\n:::\n\n```{.r .cell-code}\n#OR\n\nggplot(ten_lang, aes(x = mother_tongue, y = language)) +\n  geom_bar(stat = \"identity\") \n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-5-2.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. This flips the x and y axes! \n\n# Labels, Colors, and Themes\n\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(ten_lang, aes(x = mother_tongue, y = reorder(language, mother_tongue))) + #<1>\n  geom_bar(fill=\"lightblue\", stat = \"identity\") + #<2> \n  ylab(\"Language\") + #<3> \n  xlab(\"Mother Tongue (Number of Canadian Residents)\") + #<4>\n  ggtitle(\"Ten Aboriginal Languages Most Often \\n Reported by Canadian Residents \\n as Their Mother Tongue\") + #<5>\n  theme_minimal() #<6>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-6-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n\n1. The reorder function helps to reorder the languages from highest to lowest value of mother tongue. \n2. Changes the colors of the bars to light blue! \n3. Updates x-axis label\n4. Updates y-axis label\n5. adds a title\n6. changes the theme\n\n:::callout-tip\nBarplots are good for displaying one categorical variable and one numeric variable. The number variable could be counts (as above) or they could be averages or totals or maximums or minimums (or many other things!)\n:::\n\n# ggplot: scatterplot with `geom_point`\n\n:::callout-tip\nScatterplots are good for displaying the relationship between two numerical variables. \n:::\n\nThe `mtcars` dataset was extracted from the 1974 Motor Trend US magazine, and comprises fuel consumption and 10 aspects of automobile design and performance for 32 automobiles (1973â€“74 models). It's available inside the `ggplot` package which is already installed. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#load the data\ndata(mtcars)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\nmtcars %>% #<1>\nggplot(aes(x=wt, y=mpg)) + #<2>\n  geom_point() #<3>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-8-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. Begin with the `mtcars` dataset\n2. set up the plot -- weight on the x-axis and miles per gallon on the y-axis\n3. Adds a scatter plot layer to the plot.\n\nNote that you can change the color, shape (`pch` for plotting character) and size of these points! \n\n### Quick update to the dataset\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#code to update `mtcars` dataset so that `am` is treated as a factor rather than a continuous numeric variable\nmtcars <- mtcars %>%  \n  mutate(am = as.factor(am)) \n```\n:::\n\n\n\nThis modifies the am column, which represents the transmission type of the car (0 = automatic, 1 = manual). The as.factor(am) function converts the am variable from a numeric type (0 or 1) into a categorical factor.\n\n# Inside `aes()` or outside `aes()`?\n\nWhat is the difference between these two graphs? \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#color not in aesthetics\nggplot(mtcars, aes(x=wt, y=mpg)) +\n  geom_point(color=\"red\") #<1>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-10-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. color the same for all points\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#color in aesthetics\nggplot(mtcars, aes(x=wt, y=mpg)) +\n  geom_point(aes(color=am)) #<1>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-11-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. color will vary based on the value of am\n\n:::callout-tip\n- If the thing you are trying to change (color, shape, size, etc.) depends on a variable, you should put in *inside* the aesthetics\n- If the thing you are trying to change (color, shape, size, etc.) should happen for all things, you should not put it inside the aesthetics. \n:::\n\n# Customizing Colors in Aesthetics\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#color in aesthetics\nggplot(mtcars, aes(x=wt, y=mpg)) +\n  geom_point(aes(color=am)) +\n  scale_color_manual(values=c(\"black\", \"orange\")) #<1>\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-12-1.pdf){fig-pos='H'}\n:::\n:::\n\n\n\n1. This updates the two colors to black and orange, instead of the default colors. \n\n# Global vs. Local Aesthetics \n\nGlobal aesthetic mappings apply to all geometries and can be defined when you initially call `ggplot()`. All the geometries added as layers will default to this mapping. Local aesthetic mappings add additional information or override the default mappings.\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#color = am as a global aethetic\nggplot(mtcars, aes(x=wt, y=mpg, color=am)) +\n  geom_point()\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-13-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#color = am as a local aethetic\nggplot(mtcars, aes(x=wt, y=mpg)) +\n  geom_point(aes(color=am))\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-14-1.pdf){fig-pos='H'}\n:::\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#overwriting color = am as a global aethetic with a local aesthetic\nggplot(mtcars, aes(x=wt, y=mpg, color=am)) +\n  geom_point(color=\"purple\")\n```\n\n::: {.cell-output-display}\n![](118_D_ggplot_files/figure-pdf/unnamed-chunk-15-1.pdf){fig-pos='H'}\n:::\n:::",
    "supporting": [
      "118_D_ggplot_files/figure-pdf"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": null,
    "postProcess": false
  }
}