{
  "hash": "1a704fbae8a73727d6c4d7f574a77d33",
  "result": {
    "markdown": "---\ntitle: \"Making plots  with ggplot2: histograms, boxplots, line graphs\"\nauthor: 'Emily Malcolm-White'\nformat:\n  html: \n    toc: TRUE\n    code-overflow: wrap\n    embed-resources: true\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\n    code-annotations: hover\n  pdf: default\nexecute: \n  message: FALSE\n  warning: FALSE\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n# load packages\nlibrary(tidyverse)\n```\n:::\n\n\n# `possum` data\n\nThe possum data frame consists of nine morphometric measurements on each of 104 mountain brushtail possums, trapped at seven Australian sites from Southern Victoria to central Queensland.\n\nThere are two different populations (`pop`):  `Vic` (Victoria) and `other` (New South Wales or Queensland)\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#Be sure to install the DAAG package if you've never used it before... \nlibrary(DAAG)\ndata(\"possum\")\n```\n:::\n\n\n\n# Histograms\n\n:::callout-tip\nHistograms are great for looking at the distributions of numeric variables\n:::\n\nA boxplot for the footlength (`footlgth`) of all possums in this dataset: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(possum, aes(x=footlgth)) + #<1> \n  geom_histogram(binwidth=1)  #<2>\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-3-1.png){width=672}\n:::\n:::\n\n\n1. only one x variable is needed\n2. you can adjust the binwidth, as needed\n\n\nYou can also customize by color: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(possum, aes(x=footlgth, fill=Pop)) + #<1> \n  geom_histogram(binwidth=1)  \n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n1. adding `fill=Pop` customizes the colors based on which population the possums come from\n\nSome people prefer to use `geom_density` for a smoother effect: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(possum, aes(x=footlgth, fill=Pop)) +\n  geom_density(alpha=0.5)  #<1>\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n1. Personally, I prefer density plots with slight transparency (`alpha=0.5`) so that you can fully see both plots\n\n\n# Boxplots\n\n:::callout-tip\nBoxplots are good for displaying the spread, central tendency, and distribution of one numeric variable. \n:::\n\n![Credit: Michael Galarnyk](https://miro.medium.com/max/9000/1*2c21SkzJMf3frPXPAR_gZA.png)\n\nA lone box-plot for one numeric variable (foot length) with some custom colors: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(possum, aes(y=footlgth)) +\n  geom_boxplot(color=\"blue\", fill=\"lightblue\")  #<1> \n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n1. The `geom` for boxplot. The `color` arguments makes the outline of the boxplot blue and the the `fill` argument shades the inside of the inner quartile range. \n\n:::{callout-tip}\n\nIf only one boxplot, it puts weird numbers on the x axis, you may want to use the theme to hide these numbers. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(possum, aes(y = footlgth)) +\n  geom_boxplot(color = \"blue\", fill = \"lightblue\") +\n  theme(\n    axis.text.x = element_blank(),  # Hide text\n    axis.ticks.x = element_blank(), # Hide tick marks\n    axis.title.x = element_blank()  # Hide axis title\n  )\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n:::\n\n:::callout-tip\nSide-by-side boxplots are good for displaying one categorical variable and one numeric variable. One advantage of boxplots over bar plots is that they are able to show a bit about the spread and distribution of the numeric variable! \n:::\n\nA side-by-side boxplot to compare the foot lengths between the two populations of possums: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# same color for both boxplots\nggplot(possum, aes(y=footlgth, x=Pop)) +\n  geom_boxplot(color=\"blue\", fill=\"lightblue\")\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-8-1.png){width=672}\n:::\n\n```{.r .cell-code}\n# different color for both boxplots\nggplot(possum, aes(y=footlgth, x=Pop, color=Pop)) +\n  geom_boxplot() + \n  scale_color_manual(values=c(\"red\", \"orange\"))\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-8-2.png){width=672}\n:::\n:::\n\n\n# Line Graph\n\nThis dataset was produced from US economic time series data available from [https://fred.stlouisfed.org/](https://fred.stlouisfed.org/). Type `? economics` to learn more. \n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(\"economics\")\n```\n:::\n\n\nCreate a line plot with the unemployment rate of the US over time: \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Create a line plot of unemployment over time\nggplot(economics, aes(x = date, y = unemploy)) +\n  geom_line(color = \"darkblue\", size = 1) +\n  labs(\n    title = \"U.S. Unemployment Over Time\",\n    x = \"Year\",\n    y = \"Number of Unemployed (in thousands)\"\n  ) \n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n:::callout-tip\n\nIn ggplot2, you use the **`group`** aesthetic in a `geom_line()` plot when you need to explicitly tell R how to group data points together into lines.\n\n**üå∂Ô∏è Spicy alert**: I am creating a dataset here using some techniques that might be new to you. Don't worry so much about *how* I created the dataset, you should focus on what the dataset looks like. \n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Example dataset\ndf <- data.frame(\n  time = rep(1:5, 2),\n  value = c(1, 3, 5, 7, 9, 2, 5, 8, 11, 14),\n  category = rep(c(\"A\", \"B\"), each = 5)\n)\n\ndf\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n   time value category\n1     1     1        A\n2     2     3        A\n3     3     5        A\n4     4     7        A\n5     5     9        A\n6     1     2        B\n7     2     5        B\n8     3     8        B\n9     4    11        B\n10    5    14        B\n```\n:::\n:::\n\n\n## Without the needed `group` command\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Incorrect: Only one line drawn without group\nggplot(df, aes(x = time, y = value)) +\n  geom_line() +\n  ggtitle(\"Incorrect - Missing Group\")\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n\n## With the `group` command\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Correct: Separate lines for each category using group\nggplot(df, aes(x = time, y = value, group = category)) +\n  geom_line() +\n  ggtitle(\"Correct - Grouped by Category\")\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-13-1.png){width=672}\n:::\n:::\n\n\n## Using `color` (or `linetype`) instead\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Automatically groups by color\nggplot(df, aes(x = time, y = value, color = category)) +\n  geom_line() +\n  ggtitle(\"Grouping by Color\")\n```\n\n::: {.cell-output-display}\n![](118_E_ggplot_2_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n:::\n",
    "supporting": [
      "118_E_ggplot_2_files/figure-html"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}