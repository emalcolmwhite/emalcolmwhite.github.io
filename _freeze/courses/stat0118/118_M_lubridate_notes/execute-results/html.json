{
  "hash": "3f62665e0e31c7fda565bb15911398a2",
  "result": {
    "markdown": "---\ntitle: 'Working with dates using `lubridate`'\nauthor: 'Emily Malcolm-White'\nformat:\n  html: \n    toc: TRUE\n    code-overflow: wrap\n    embed-resources: true\n    code-tools:\n      source: true\n      toggle: false\n      caption: none\n    code-annotations: hover\n  pdf: default\nexecute: \n  message: FALSE\n  warning: FALSE\n---\n\n\n![](https://lubridate.tidyverse.org/logo.png){width=20%}\n\nDates and times are everywhere in data: timestamps on social media posts, transaction dates in sales records, birthdates in survey data. But unlike numbers or strings, dates are tricky—you can’t just subtract them like normal numbers, and parsing them from messy formats can be a headache.\n\n# Date Formats\n\nThink of how many different formats you know of to format a date: \n\n- 2023 07 06 \n- Wed, Jun 7, 2023\n- 07-06-23\n- 06-07-23 14:55 ET\n- 06/07/2023 2:55pm\n\nYikes! \n\n# Date, Time, and Datetime\n\nDate/time data are data that conveys information about, you guessed it, date and/or time! There are three relevant data types when we talk about date/time data:\n\n1. Date - only has the date (e.g. 2020-05-15) \n2. Time - only has the time (e.g. 20:45:00) \n3. Datetime - has both the date and time (e.g. 2020-05-15 20:45:00)\n\n# `Lubridate`\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\nlibrary(lubridate)\n```\n:::\n\n\n# Standard Date Format\n\nThe `ymd()` function transforms data in all kinds of different formats into a standardized date format displaying year, then month, then day. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nymd(\"06 02 04\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2006-02-04\"\n```\n:::\n\n```{.r .cell-code}\nymd(\"06/02/04\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2006-02-04\"\n```\n:::\n\n```{.r .cell-code}\nymd(\"20060204\")  # works as well\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2006-02-04\"\n```\n:::\n\n```{.r .cell-code}\nymd(\"2006 2 4\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2006-02-04\"\n```\n:::\n\n```{.r .cell-code}\nymd(060204)  # works with numbers\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2006-02-04\"\n```\n:::\n:::\n\n\n`mdy()` (month day year) and `dmy()` (day month year) formats also exist. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nymd_hms(\"2020-04-01 10:30:13\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2020-04-01 10:30:13 UTC\"\n```\n:::\n\n```{.r .cell-code}\nymd_hm(\"2020/04/01 10.30\")\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] \"2020-04-01 10:30:00 UTC\"\n```\n:::\n:::\n\n\n# Extracting Components\n\n![Artwork by @allisonhorst](https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/3017cf57-d7d9-4f73-9b66-f2be0ebf2489_rw_1920.png?h=2cdd179bc087c56b43f8aa6ea849ca1a){width=50%}\n\nOnce you have a date object, you can easily extract parts of it: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nbirthday <- ymd(\"1998-09-27\")\n\nyear(birthday)      # 1998\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 1998\n```\n:::\n\n```{.r .cell-code}\nmonth(birthday)     # 9\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 9\n```\n:::\n\n```{.r .cell-code}\nmonth(birthday, label = TRUE)  # \"Sep\"\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] Sep\n12 Levels: Jan < Feb < Mar < Apr < May < Jun < Jul < Aug < Sep < ... < Dec\n```\n:::\n\n```{.r .cell-code}\nday(birthday)       # 27\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] 27\n```\n:::\n\n```{.r .cell-code}\nwday(birthday, label = TRUE)   # \"Sun\"\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n[1] Sun\nLevels: Sun < Mon < Tue < Wed < Thu < Fri < Sat\n```\n:::\n:::\n\n\n\n# Doing Math with Dates\n\nSet up the object `today` as today's date:  \n\n\n::: {.cell}\n\n```{.r .cell-code}\ntoday <- Sys.Date()\n```\n:::\n\n\nCalculate the age based on today's date and your birthday: \n\n\n::: {.cell}\n\n:::\n\n\nWhat is will be the date 28 days from now? \n\n\n::: {.cell}\n\n:::\n\n\n# Some real life examples: \n\nRecall the Portal Project --  a long-term ecological study being conducted near Portal, AZ. Since 1977, the site has been used to study the interactions among rodents, ants and plants and their respective responses to climate.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD DATA\nportal_rodent <- read.csv(\"https://github.com/weecology/PortalData/raw/main/Rodents/Portal_rodent.csv\")\n```\n:::\n\n\nUnfortunately, because the information about datetime is divided up into different columns, R does not recognize it as date/time data. What we need to do is combine and convert all of these columns into datetime. To do this, we can use the function `make_datetime()`\n\n\n::: {.cell}\n\n:::\n\n\nA line plot showing the number of rodents captured per day over time: \n\n\n::: {.cell}\n\n:::\n\nUse the `floor_date` function to round each date down to the first day of the month, which is great for time series grouping. \n\n\n::: {.cell}\n\n:::\n\n\nAlternatively, use the `floor_date` function to round each date down to first day of the year: \n\n\n::: {.cell}\n\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}