{
  "hash": "edc2147358bc9a515ba482e5dc3868dc",
  "result": {
    "markdown": "---\ntitle: 'STAT 118: Notes L'\nsubtitle: 'Plotting Points on Maps'\nformat:\n  html:\n    toc: true\n    code-overflow: wrap\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\nlibrary(sf) #this is a package needed so R can work with sf objects\n\n#LOAD DATA\nlibrary(spData) #this packages contains the dataset (with sf objects) that we will be using today\ndata(\"us_states\")\n```\n:::\n\n\n# More `sf` maps with points\n\nRecall our map of the continential US which shows the state borders. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nus_states %>% \nggplot() + \n  geom_sf() +\n  theme_light()\n```\n\n::: {.cell-output-display}\n![](118_L_Maps2_Notes_Template_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\nRecall the `nycflights13` dataset which had all kinds information about all the flights out of NYC airports in 2013. Check out the `airports` dataset, which has the latitude and longitude of all airports in the USA. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(nycflights13)\ndata(airports)\n```\n:::\n\n\nSuppose we want to plot these onto our map: \n\n\n::: {.cell}\n\n:::\n\n\nWhat if we wanted to have each dot size represent the number of flights that flew to those airports from NYC? First we need the data: \n\n\n::: {.cell}\n\n:::\n\n\nThen we need to merge this data into the `airports` dataset: \n\n\n::: {.cell}\n\n:::\n\n\nThen we can add it to our plot: \n\n\n::: {.cell}\n\n:::\n\n\n\n# Leaflet\n\nLeaflet is one of the most popular open-source JavaScript libraries for interactive maps. Leaflet was created 11 years ago by [Volodymyr Agafonkin](https://agafonkin.com/), a Ukrainian citizen living in Kyiv. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(leaflet)\n```\n:::\n\n\nYou create a Leaflet map with these basic steps:\n\n1. Create a map widget by calling leaflet().\n2. Add layers (i.e., features) to the map by using layer functions (e.g. `addTiles`, `addMarkers`, `addPolygons`) to modify the map widget.\n3. Repeat step 2 as desired.\n4. Print the map widget to display it.\n\n## Using OpenStreet Maps\n\nA simple map of Warner Hall: \n\n\n::: {.cell}\n\n```{.r .cell-code}\nleaflet() %>%\n  addTiles() %>%  # Add default OpenStreetMap map tiles\n  addMarkers(lng=-73.175, lat=44.010, popup=\"Warner Hall\")\n```\n\n::: {.cell-output-display}\n```{=html}\n<div class=\"leaflet html-widget html-fill-item-overflow-hidden html-fill-item\" id=\"htmlwidget-29b929aee643cdcf32f4\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-29b929aee643cdcf32f4\">{\"x\":{\"options\":{\"crs\":{\"crsClass\":\"L.CRS.EPSG3857\",\"code\":null,\"proj4def\":null,\"projectedBounds\":null,\"options\":{}}},\"calls\":[{\"method\":\"addTiles\",\"args\":[\"https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png\",null,null,{\"minZoom\":0,\"maxZoom\":18,\"tileSize\":256,\"subdomains\":\"abc\",\"errorTileUrl\":\"\",\"tms\":false,\"noWrap\":false,\"zoomOffset\":0,\"zoomReverse\":false,\"opacity\":1,\"zIndex\":1,\"detectRetina\":false,\"attribution\":\"&copy; <a href=\\\"https://openstreetmap.org\\\">OpenStreetMap<\\/a> contributors, <a href=\\\"https://creativecommons.org/licenses/by-sa/2.0/\\\">CC-BY-SA<\\/a>\"}]},{\"method\":\"addMarkers\",\"args\":[44.01,-73.175,null,null,null,{\"interactive\":true,\"draggable\":false,\"keyboard\":true,\"title\":\"\",\"alt\":\"\",\"zIndexOffset\":0,\"opacity\":1,\"riseOnHover\":false,\"riseOffset\":250},\"Warner Hall\",null,null,null,null,{\"interactive\":false,\"permanent\":false,\"direction\":\"auto\",\"opacity\":1,\"offset\":[0,0],\"textsize\":\"10px\",\"textOnly\":false,\"className\":\"\",\"sticky\":true},null]}],\"limits\":{\"lat\":[44.01,44.01],\"lng\":[-73.175,-73.175]}},\"evals\":[],\"jsHooks\":[]}</script>\n```\n:::\n:::\n\n\nA map of all airports in the USA: \n\n\n::: {.cell}\n\n:::\n\n\nor using Circle Markers: \n\n\n::: {.cell}\n\n:::\n",
    "supporting": [
      "118_L_Maps2_Notes_Template_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../../site_libs/htmlwidgets-1.6.2/htmlwidgets.js\"></script>\n<script src=\"../../site_libs/jquery-1.12.4/jquery.min.js\"></script>\n<link href=\"../../site_libs/leaflet-1.3.1/leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-1.3.1/leaflet.js\"></script>\n<link href=\"../../site_libs/leafletfix-1.0.0/leafletfix.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/proj4-2.6.2/proj4.min.js\"></script>\n<script src=\"../../site_libs/Proj4Leaflet-1.0.1/proj4leaflet.js\"></script>\n<link href=\"../../site_libs/rstudio_leaflet-1.3.1/rstudio_leaflet.css\" rel=\"stylesheet\" />\n<script src=\"../../site_libs/leaflet-binding-2.1.2/leaflet.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}