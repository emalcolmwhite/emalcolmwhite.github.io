{
  "hash": "94c3c3f293e251d70fafb5077aa13a9c",
  "result": {
    "markdown": "---\ntitle: 'STAT 118: Notes D'\nsubtitle: |\n  | Pretty tables with `kableExtra`\n  | ![](https://zhuhao.org/post/2019-01-31-tips-on-designing-a-hex-sticker-for-rstats-packages_files/kableExtra_sm.png){width=10%}\nauthor: 'Emily Malcolm-White'\ninstitute: 'Middlebury College'\nformat:\n  html: \n    toc: TRUE\n    code-overflow: wrap\n    embed-resources: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD DATA \nlibrary(palmerpenguins)\ndata(penguins)\n\n#CLEAN UP DATA\npenguins <- penguins %>%\n  drop_na()\n#sometimes this is appropriate. It's questionable here... \n```\n:::\n\n\n# `mutate`\n\nThe mutate function allows you create a new column which is a function of other columns. This can be useful to converting units.\n\n![Artwork by @allisonhorst](https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/bd4ae264-ae51-4d18-bd60-7a058ab42fba_rw_1920.png?h=a3757d1f46f418c59e7e7946d026344e){width=50%}\n\nFor example, let's calculate create a new column which displays the body length weight in pounds (lbs) instead of grams. Recall: to convert from grams to pounds we need to multiply by 0.00220462\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins %>% \n  mutate(body_mass_lbs = body_mass_g*0.00220462)\n```\n:::\n\n\nThis can also be useful for making new calculations based on existing data (for example, price and number of square feet could be used to calculate price per square foot).\n\n# `case_when`\n\nCase when can be used in combination with `mutate` to create a new column with a categorical variable conditional on the values in another column.\n\n![Artwork by @allisonhorst](https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/6ffcd6d6-c783-4087-ae76-99aa851663ed_rw_1920.png?h=5f67935d69c92e1fda9074d00dfea972){width=50%}\n\nFor example:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins %>% \n  mutate(penguin_length_cat = case_when(bill_length_mm > 50 ~ 'whoa! huge bill!', TRUE ~ '--' ))\n```\n:::\n\n\n::: callout-tip\nFor those of you who have taken a computer science class before, you may notice that `case_when` is similar to using an `ifelse` statement. You can also use `ifelse` in R if you'd prefer!\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins %>% \n  mutate(penguin_length_cat = ifelse(bill_length_mm > 50, 'whoa! huge bill!', '--' ))\n```\n:::\n\n:::\n\n\n# default printing style of a table\n\nLet's consider our table from last class:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  group_by(species) %>%\n  summarise(average_bill_lenth = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 Ã— 3\n  species   average_bill_lenth average_bill_depth\n  <fct>                  <dbl>              <dbl>\n1 Adelie                  38.8               18.3\n2 Chinstrap               48.8               18.4\n3 Gentoo                  47.6               15.0\n```\n:::\n:::\n\n\nWhen we knit this up it looks like of ugly...\n\n# Using `kable` to get pretty tables\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(kableExtra)\n```\n:::\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  group_by(species) %>%\n  summarise(average_bill_length = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm)) %>% \n  kbl()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> species </th>\n   <th style=\"text-align:right;\"> average_bill_length </th>\n   <th style=\"text-align:right;\"> average_bill_depth </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Adelie </td>\n   <td style=\"text-align:right;\"> 38.82397 </td>\n   <td style=\"text-align:right;\"> 18.34726 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chinstrap </td>\n   <td style=\"text-align:right;\"> 48.83382 </td>\n   <td style=\"text-align:right;\"> 18.42059 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gentoo </td>\n   <td style=\"text-align:right;\"> 47.56807 </td>\n   <td style=\"text-align:right;\"> 14.99664 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n\n```{.r .cell-code}\n#OR \n\ntable1 <- penguins %>%\n  group_by(species) %>%\n  summarise(average_bill_length = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm))\n\nkbl(table1)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> species </th>\n   <th style=\"text-align:right;\"> average_bill_length </th>\n   <th style=\"text-align:right;\"> average_bill_depth </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Adelie </td>\n   <td style=\"text-align:right;\"> 38.82397 </td>\n   <td style=\"text-align:right;\"> 18.34726 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chinstrap </td>\n   <td style=\"text-align:right;\"> 48.83382 </td>\n   <td style=\"text-align:right;\"> 18.42059 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gentoo </td>\n   <td style=\"text-align:right;\"> 47.56807 </td>\n   <td style=\"text-align:right;\"> 14.99664 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\n\n# Options in kable\n\nWe customize the content so it's displaying the information more clearly.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 %>%\n  kbl(col.names = c(\"Species\", \"Average Bill Length\", \"Average Bill Depth\"), \n    caption = \"Average Bill Characteristics by Species\", \n    digits = 2)\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table>\n<caption>Average Bill Characteristics by Species</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Species </th>\n   <th style=\"text-align:right;\"> Average Bill Length </th>\n   <th style=\"text-align:right;\"> Average Bill Depth </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Adelie </td>\n   <td style=\"text-align:right;\"> 38.82 </td>\n   <td style=\"text-align:right;\"> 18.35 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chinstrap </td>\n   <td style=\"text-align:right;\"> 48.83 </td>\n   <td style=\"text-align:right;\"> 18.42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gentoo </td>\n   <td style=\"text-align:right;\"> 47.57 </td>\n   <td style=\"text-align:right;\"> 15.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nBetter...\n\n# pretty styling\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 %>%\n  kbl(col.names = c(\"Species\", \"Average Bill Length\", \"Average Bill Depth\"), \n    caption = \"Average Bill Characteristics by Species\", \n    digits = 2) %>%\n  kable_styling()\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\"table\" style=\"margin-left: auto; margin-right: auto;\">\n<caption>Average Bill Characteristics by Species</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Species </th>\n   <th style=\"text-align:right;\"> Average Bill Length </th>\n   <th style=\"text-align:right;\"> Average Bill Depth </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;\"> Adelie </td>\n   <td style=\"text-align:right;\"> 38.82 </td>\n   <td style=\"text-align:right;\"> 18.35 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Chinstrap </td>\n   <td style=\"text-align:right;\"> 48.83 </td>\n   <td style=\"text-align:right;\"> 18.42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;\"> Gentoo </td>\n   <td style=\"text-align:right;\"> 47.57 </td>\n   <td style=\"text-align:right;\"> 15.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nMany options for customizing the look of the tables -- more here: <https://cran.r-project.org/web/packages/kableExtra/vignettes/awesome_table_in_html.html>\n\nLet's try one...\n\nLet's make each row's color correspond to\n\n\n::: {.cell}\n\n```{.r .cell-code}\ntable1 %>%\n  kbl(col.names = c(\"Species\", \"Average Bill Length\", \"Average Bill Depth\"), \n    caption = \"Average Bill Characteristics by Species\", \n    digits = 2) %>%\n  kable_paper() %>%\n  column_spec(1, bold=T) %>%\n  row_spec(2, color = \"#c85bcc\") %>%\n  row_spec(3, color = \"#067176\") %>%\n  row_spec(1, color = \"#ff7501\")\n```\n\n::: {.cell-output-display}\n`````{=html}\n<table class=\" lightable-paper\" style='font-family: \"Arial Narrow\", arial, helvetica, sans-serif; margin-left: auto; margin-right: auto;'>\n<caption>Average Bill Characteristics by Species</caption>\n <thead>\n  <tr>\n   <th style=\"text-align:left;\"> Species </th>\n   <th style=\"text-align:right;\"> Average Bill Length </th>\n   <th style=\"text-align:right;\"> Average Bill Depth </th>\n  </tr>\n </thead>\n<tbody>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;color: rgba(255, 117, 1, 255) !important;\"> Adelie </td>\n   <td style=\"text-align:right;color: rgba(255, 117, 1, 255) !important;\"> 38.82 </td>\n   <td style=\"text-align:right;color: rgba(255, 117, 1, 255) !important;\"> 18.35 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;color: rgba(200, 91, 204, 255) !important;\"> Chinstrap </td>\n   <td style=\"text-align:right;color: rgba(200, 91, 204, 255) !important;\"> 48.83 </td>\n   <td style=\"text-align:right;color: rgba(200, 91, 204, 255) !important;\"> 18.42 </td>\n  </tr>\n  <tr>\n   <td style=\"text-align:left;font-weight: bold;color: rgba(6, 113, 118, 255) !important;\"> Gentoo </td>\n   <td style=\"text-align:right;color: rgba(6, 113, 118, 255) !important;\"> 47.57 </td>\n   <td style=\"text-align:right;color: rgba(6, 113, 118, 255) !important;\"> 15.00 </td>\n  </tr>\n</tbody>\n</table>\n\n`````\n:::\n:::\n\n\nRStudio hosts a table contest every year!\n\n-   Here is a link to this year's contest <https://www.rstudio.com/blog/rstudio-table-contest-2022/>\n-   Here is a link to previous year's entries and winners to explore what is possible! <https://community.rstudio.com/c/table-gallery/64>\n\n::: callout-tip\nAs a general rule, you should have the content of the table as you'd like it (the exact columns and rows you want) first and *then* you can make it pretty using the `kableExtra` package.\n:::\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<script src=\"../site_libs/kePrint-0.0.1/kePrint.js\"></script>\n<link href=\"../site_libs/lightable-0.0.1/lightable.css\" rel=\"stylesheet\" />\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}