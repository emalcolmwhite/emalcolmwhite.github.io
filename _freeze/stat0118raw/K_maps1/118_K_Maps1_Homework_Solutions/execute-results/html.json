{
  "hash": "c65fbec147fb427c59d65061bccdae04",
  "result": {
    "markdown": "---\ntitle: \"STAT 118: Homework K\"\nsubtitle: 'Intro to Maps'\nauthor: \"YOUR NAME HERE\"\nformat:\n  html: \n    toc: true\n    code-overflow: wrap\n    code-fold: true\n    embed-resources: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\nlibrary(sf) #this is a package needed so R can work with sf objects\nlibrary(maps)\n```\n:::\n\n\n# Using the `maps` package\n\n# 1.\nUse the `maps` package to create a map of New Zealand. To access map data for New Zealand use the code: `nz_maps <- map_data(\"world\", region = \"New Zealand\")`. You may need to subset the latitude and longitude coordinates to get a great map of New Zealand. The land should be some shade of orange. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nnz_maps <- map_data(\"world\", region = \"New Zealand\")\n\nggplot(nz_maps, aes(long, lat))+\n  geom_polygon(aes(group=group), color =\"black\", fill = \"orange\")+\n  xlim(c(160,190))+\n  ylim(c(-55,-30))+\n  coord_quickmap()+\n  xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Map of New Zeland\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-2-1.png){width=672}\n:::\n:::\n\n\n\n# Use the `sf` package\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD DATA\nlibrary(spData) #this packages contains the dataset (with sf objects) that we will be using today\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nThe legacy packages maptools, rgdal, and rgeos, underpinning the sp package,\nwhich was just loaded, will retire in October 2023.\nPlease refer to R-spatial evolution reports for details, especially\nhttps://r-spatial.org/r/2023/05/15/evolution4.html.\nIt may be desirable to make the sf package available;\npackage maintainers should consider adding sf to Suggests:.\nThe sp package is now running under evolution status 2\n     (status 2 uses the sf package in place of rgdal)\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\nTo access larger datasets in this package, install the spDataLarge\npackage with: `install.packages('spDataLarge',\nrepos='https://nowosad.github.io/drat/', type='source')`\n```\n:::\n\n```{.r .cell-code}\ndata(\"nz\")\ndata(\"us_states\")\ndata(\"us_counties\")\n```\n\n::: {.cell-output .cell-output-stderr}\n```\nWarning in data(\"us_counties\"): data set 'us_counties' not found\n```\n:::\n:::\n\n\n# 2.\nUse the `sf` package to create a map of New Zealand. To access `sf` geometries for New Zealand use the \"nz\" dataset loaded above. The land should be some shade of orange. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(nz)+\n  geom_sf(fill = \"orange\")+\n   xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Map of New Zeland\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\n\n# 3.\nName two differences between the two New Zealand maps you created above. \n\n- The sf map has lines distinguishing the subregions.\n- The sf map has slightly curved latitude lines.\n\n# 4. \nUse the `us_states` dataset from above to create a map of the US States. All the land map should be some shade of red. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(us_states)+\n  geom_sf(fill = \"red\")+\n   xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Map of United States\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n# 5. \nThe `us_states` dataset has a column `REGION` which indicates whether the state is \"Northeast\", \"Midwest\", \"South\", or \"West\". Create a map which shades each state depending on the REGION it is located in.  \n\n\n::: {.cell}\n\n```{.r .cell-code}\n ggplot(us_states)+\n  geom_sf(aes(fill = REGION))+\n  xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Regions of United States\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n# 6.\nCreate a cloropleth map which colors each state depending on the total population of that state in 2015 (`total_pop_15` column in the `us_states` dataset). \n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(RColorBrewer)\n\nggplot(us_states)+\n  geom_sf(aes(fill = total_pop_15))+\n    scale_fill_gradientn(colors = brewer.pal(8, \"PuRd\")[4:8]) + \n  theme_minimal()+\n   xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Population in the United States\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\nSuppose we wish to incorporate data from another source on each state. This will require us to join the `sf` data with another dataset (remember joins from before?). \n\n\n::: {.cell}\n\n```{.r .cell-code}\n#dataset which contains information about each state\ndata(state) \nstate_data <- data.frame(state.x77)\n#weirdly, the state names are listed as row names instead of in their own column. The below code fixes this. \nstate_data$NAME <- rownames(state_data)\n```\n:::\n\n\n# 7. \nJoin together the `state_data` dataset with the `sf` data housed in `us_states` into a new dataset called `states_map_data`. The key variable is the state name. \n\n\n::: {.cell}\n\n```{.r .cell-code}\nstates_map_data <- us_states %>% \n  inner_join(state_data, by = \"NAME\")\n```\n:::\n\n\n# 8. \nNote that in the previous step we lost one data row. What was it? \n\n- There are 49 rows in us_states contain all the information about the continential US (49 states excluding Alaksa and Hawaii + District of Columbia). \n- There are 50 rows in state_data (All 50 states including Alaska and Hawaii and not the District of Columbia) \n\n`states_map_data` will contain all the contential US states, but not the District of Columbia.  \n\n\n# 9. \nIgnoring the fact that we lost one row, use your new dataset `states_map_data` (from 7) to create a cloropleth map which colors each state depending on the illiteracy rate in 1970 as a percent of the population (`Illiteracy`). Use any color palette you like. \n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(states_map_data)+\n  geom_sf(aes(fill = Illiteracy))+\n    scale_fill_gradientn(colors = brewer.pal(8, \"YlOrRd\")[3:8]) + \n  theme_minimal()+\n   xlab(\"Longitude\")+\n  ylab(\"Latitude\")+\n  ggtitle(\"Illiteracy in the United States\")\n```\n\n::: {.cell-output-display}\n![](118_K_Maps1_Homework_Solutions_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n",
    "supporting": [
      "118_K_Maps1_Homework_Solutions_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}