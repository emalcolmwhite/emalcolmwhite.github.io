{
  "hash": "f9c38b250ba212778f38b9ea61ff768f",
  "result": {
    "markdown": "---\ntitle: 'Aggregating data with `summarize`, `group_by()`'\nsubtitle: 'STAT 118: Notes C'\nauthor: 'Emily Malcolm-White'\ninstitute: 'Middlebury College'\nformat:\n  html: \n    toc: TRUE\n    code-overflow: wrap\n    embed-resources: true\n---\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD PACKAGES \nlibrary(tidyverse)\n```\n:::\n\n\nToday's Dataset: `palmerpenguins` Size measurements, clutch observations, and blood isotope ratios for adult foraging Adélie, Chinstrap, and Gentoo penguins observed on islands in the Palmer Archipelago near Palmer Station, Antarctica. Data were collected and made available by Dr. Kristen Gorman and the Palmer Station Long Term Ecological Research (LTER) Program.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n#LOAD DATA \nlibrary(palmerpenguins)\ndata(penguins)\n```\n:::\n\n\n# Remove rows with missing data with `drop_na()`\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins <- penguins %>%\n  drop_na()\n```\n:::\n\n\n::: callout-warning\nIs it appropriate to remove rows with missing data? How many rows have missing data? Do the missing rows have something in common?\n\nRemoving rows can affect the validity and generalizability of your analysis!\n:::\n\n# `summarize` Function or `summarise` Function (either works)\n\nSuppose we are interested in the average bill length of all Adelie penguins:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  filter(species == \"Adelie\") %>%\n  summarize(average_bill_lenth = mean(bill_length_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 1\n  average_bill_lenth\n               <dbl>\n1               38.8\n```\n:::\n:::\n\n\nSuppose we are interested in the average bill length AND average bill depth of all Adelie penguins:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  filter(species == \"Adelie\") %>%\n  summarize(average_bill_lenth = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  average_bill_lenth average_bill_depth\n               <dbl>              <dbl>\n1               38.8               18.3\n```\n:::\n:::\n\n\nThere are lots of other functions available:\n\n-   `min`: minimum value\n-   `max`: maximum value\n-   `mean`: average or mean value\n-   `median`: median value\n-   `var`: variance\n-   `sd`: standard deviation\n-   `n`: count or number of values\n-   `n_distinct`: counts number of distinct values\n\nSuppose we are interested in the average bill length AND the median bill length of all Adelie penguins:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  filter(species == \"Adelie\") %>%\n  summarise(average_bill_lenth = mean(bill_length_mm), \n            median_bill_length = median(bill_length_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 1 × 2\n  average_bill_lenth median_bill_length\n               <dbl>              <dbl>\n1               38.8               38.8\n```\n:::\n:::\n\n\n# `group_by`\n\nLet's say we were interested in the average bill length and bill depth of all penguin species in this dataset. We could repeat this for the other species (Gentoo and Chinstrap). This would be a fair amount of work AND the results would not end up in the same table.\n\nOR we could use the `group_by` command!\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  group_by(species) %>%\n  summarise(average_bill_lenth = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 3\n  species   average_bill_lenth average_bill_depth\n  <fct>                  <dbl>              <dbl>\n1 Adelie                  38.8               18.3\n2 Chinstrap               48.8               18.4\n3 Gentoo                  47.6               15.0\n```\n:::\n:::\n\n\n## Multiple Groups\n\nSuppose we wish to have the average bill length and average bill depth broken down by sex AND species:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  group_by(species, sex) %>%\n  summarise(average_bill_length = mean(bill_length_mm), \n            average_bill_depth = mean(bill_depth_mm))\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'species'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 6 × 4\n# Groups:   species [3]\n  species   sex    average_bill_length average_bill_depth\n  <fct>     <fct>                <dbl>              <dbl>\n1 Adelie    female                37.3               17.6\n2 Adelie    male                  40.4               19.1\n3 Chinstrap female                46.6               17.6\n4 Chinstrap male                  51.1               19.3\n5 Gentoo    female                45.6               14.2\n6 Gentoo    male                  49.5               15.7\n```\n:::\n:::\n\n\n# (Optional)`across`\n\nIf you wish to apply the same calculation to many columns, you may wish to check out the `across` function.\n![Artwork by @allisonhorst](https://cdn.myportfolio.com/45214904-6a61-4e23-98d6-b140f8654a40/2471e3f8-348e-470c-a162-3eea0606ff96_rw_1920.png?h=1caf8d5f3d25792fbaf296a1e62b670a)\n\n# More Examples\n\nSuppose we want to calculate the number of distinct islands each species is found on:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>%\n  group_by(species) %>%\n  summarise(number_islands = n_distinct(island))\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 3 × 2\n  species   number_islands\n  <fct>              <int>\n1 Adelie                 3\n2 Chinstrap              1\n3 Gentoo                 1\n```\n:::\n:::\n\n\nSuppose we are interested in how many penguins of each species are on each island in the year 2007:\n\n\n::: {.cell}\n\n```{.r .cell-code}\npenguins %>% \n  filter(year == \"2007\") %>%\n  group_by(species, island) %>%\n  summarise(number_penguins = n())\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n`summarise()` has grouped output by 'species'. You can override using the\n`.groups` argument.\n```\n:::\n\n::: {.cell-output .cell-output-stdout}\n```\n# A tibble: 5 × 3\n# Groups:   species [3]\n  species   island    number_penguins\n  <fct>     <fct>               <int>\n1 Adelie    Biscoe                 10\n2 Adelie    Dream                  19\n3 Adelie    Torgersen              15\n4 Chinstrap Dream                  26\n5 Gentoo    Biscoe                 33\n```\n:::\n:::\n\n\n::: callout-warning\nRemember when we deleted rows with missing data earlier? The above is only the number of penguins which we have full data for! There could be more penguins on those islands who didn't have a complete data available for them!\n:::\n\n\n# Brain Break\n\nThis is a story about Jinjing the South American Magellanic Penguin, that swims 5,000 miles each year to be reunited with the man who saved his life. The rescued Penguin was saved by João Pereira de Souza, a 73 year old part-time fisherman, who lives in an island village just outside Rio de Janeiro, Brazil. <https://youtu.be/oks2R4LqWtE>\n\n<iframe width=\"560\" height=\"315\" src=\"https://www.youtube.com/embed/oks2R4LqWtE\" title=\"YouTube video player\" frameborder=\"0\" allow=\"accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture; web-share\" allowfullscreen>\n\n</iframe>\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {},
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}